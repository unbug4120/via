(self.webpackChunk=self.webpackChunk||[]).push([[455],{7412:e=>{e.exports=function(e,r){for(var t=-1,s=null==e?0:e.length;++t<s&&!1!==r(e[t],t,e););return e}},4290:(e,r,t)=>{var s=t(6557);e.exports=function(e){return"function"==typeof e?e:s}},6073:(e,r,t)=>{e.exports=t(4486)},4486:(e,r,t)=>{var s=t(7412),o=t(9881),n=t(4290),a=t(1469);e.exports=function(e,r){return(a(e)?s:o)(e,n(r))}},8845:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(6073),o=t.n(s);const n={name:"FilePicker",props:{label:{type:String,default:null},message:{type:String,default:null},currentFile:{default:null}},data:function(){return{errors:{},file:null,uploadPercent:0,isUploadSuccess:!1}},computed:{fieldFileMessage:function(){return this.errors.file?this.errors.file[0]:this.isUploadSuccess?"File uploaded. Submit to store":this.uploadPercent?"Uploading ".concat(this.uploadPercent,"%"):this.message},uploadButtonText:function(){return this.fileName?null:"Pick a file"},uploadButtonIcon:function(){return this.fileName?"cloud-sync":"cloud-upload"},fieldFileType:function(){return this.errors.file?"is-danger":null},fileName:function(){return this.file?this.file.name:this.currentFile?this.currentFile:null}},methods:{upload:function(e){var r=this;this.errors={};var t=new FormData;t.append("file",this.file),this.isUploadSuccess=!1,axios.post("/files/store",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:this.progressEvent}).then((function(e){r.isUploadSuccess=!0,r.$emit("file-updated",e.data.data),r.$emit("file-id-updated",e.data.data.id)})).catch((function(e){r.file=null,r.uploadPercent=0,e.response.data.errors?r.errors=e.response.data.errors:r.errors={_all:["Upload error"]},o()(r.errors,(function(e){r.$buefy.toast.open({message:e[0],type:"is-danger",queue:!1})}))}))},dropFile:function(){this.file=null,this.isUploadSuccess=!1,this.uploadPercent=0,this.$emit("file-updated",null),this.$emit("file-id-updated",null)},progressEvent:function(e){this.uploadPercent=Math.round(100*e.loaded/e.total)}}};const a=(0,t(1900).Z)(n,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("b-field",{attrs:{label:e.label,message:e.fieldFileMessage,type:e.fieldFileType}},[t("b-field",[t("b-upload",{on:{input:e.upload},model:{value:e.file,callback:function(r){e.file=r},expression:"file"}},[t("a",{staticClass:"button is-primary"},[t("b-icon",{attrs:{icon:e.uploadButtonIcon,"custom-size":"default"}}),e._v(" "),e.uploadButtonText?t("span",[e._v(e._s(e.uploadButtonText))]):e._e()],1)]),e._v(" "),e.fileName?t("div",{staticClass:"control"},[t("a",{staticClass:"button is-static is-file-upload-label"},[t("span",{attrs:{title:e.fileName}},[e._v(e._s(e.fileName))]),e._v(" "),t("span",{staticClass:"delete",on:{click:function(r){return r.preventDefault(),e.dropFile(r)}}})])]):e._e()],1)],1)}),[],!1,null,null,null).exports},1455:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>_});var s=t(629),o=t(9831),n=t(3068),a=t(2913),i=t(6073),l=t.n(i),u=t(8845);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const f={name:"ProfileUpdateForm",components:{CardComponent:o.Z,FilePicker:u.Z},data:function(){return{isFileUploaded:!1,isLoading:!1,errors:{},form:{name:null,email:null,file_id:null}}},computed:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({formNameType:function(){return this.errors.name?"is-danger":null},formNameMessage:function(){return this.errors.name?this.errors.name[0]:"Required. Your name"},formEmailType:function(){return this.errors.email?"is-danger":null},formEmailMessage:function(){return this.errors.email?this.errors.email[0]:"Required. Your e-mail"}},(0,s.rn)(["userName","userEmail"])),mounted:function(){this.form.name=this.userName,this.form.email=this.userEmail},methods:{fileStored:function(e){this.isFileUploaded=!0,this.form.file_id=e.id,this.form.name&&this.form.email&&this.submit()},emitIsForbidden:function(){this.$emit("is-forbidden")},submit:function(){var e=this;this.isFileUploaded=!1,this.isLoading=!0,this.errors={},axios.patch("/user",this.form).then((function(r){e.isLoading=!1,e.$store.commit("user",r.data.data),e.$buefy.snackbar.open({message:"Profile updated",duration:1e3,queue:!1})})).catch((function(r){e.isLoading=!1,r.response.data.errors?e.errors=r.response.data.errors:403===r.response.status?(e.$emit("is-forbidden"),e.errors={_all:["Forbidden with demo account"]}):(console.error(r.response),e.errors={_all:["An error occurred"]}),l()(e.errors,(function(r){e.$buefy.toast.open({message:r[0],type:"is-danger",queue:!1,duration:3e3})}))}))}},watch:{userName:function(e){this.form.name=e},userEmail:function(e){this.form.email=e}}};var p=t(1900);const m=(0,p.Z)(f,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("card-component",{attrs:{title:"Edit Profile",icon:"account-circle"}},[t("form",{on:{submit:function(r){return r.preventDefault(),e.submit(r)}}},[t("b-field",{attrs:{horizontal:"",label:"Avatar"}},[t("file-picker",{on:{"file-stored":e.fileStored}})],1),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{horizontal:"",label:"Name",message:e.formNameMessage,type:e.formNameType}},[t("b-input",{attrs:{name:"name",required:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("b-field",{attrs:{horizontal:"",label:"E-mail",message:e.formEmailMessage,type:e.formEmailType}},[t("b-input",{attrs:{name:"email",type:"email",required:""},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{horizontal:""}},[t("div",{staticClass:"control"},[t("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},attrs:{type:"submit"}},[e._v("\n          Submit\n        ")])])])],1)])}),[],!1,null,null,null).exports;const h={name:"PasswordUpdateForm",components:{CardComponent:o.Z},data:function(){return{isLoading:!1,errors:{},form:{password_current:null,password:null,password_confirmation:null}}},computed:{formPasswordCurrentType:function(){return this.errors.password_current?"is-danger":null},formPasswordCurrentMessage:function(){return this.errors.password_current?this.errors.password_current[0]:"Required. Your current password"},formPasswordType:function(){return this.errors.password?"is-danger":null},formPasswordMessage:function(){return this.errors.password?this.errors.password[0]:"Required. New password"}},methods:{submit:function(){var e=this;this.isLoading=!0,this.errors={},axios.patch("/user/password",this.form).then((function(r){e.isLoading=!1,e.form.password_current=null,e.form.password=null,e.form.password_confirmation=null,e.$buefy.snackbar.open({message:"Password updated",duration:1e3,queue:!1})})).catch((function(r){e.isLoading=!1,r.response.data.errors?e.errors=r.response.data.errors:e.errors={_all:["An error occurred"]},l()(e.errors,(function(r){e.$buefy.toast.open({message:r[0],type:"is-danger",queue:!1,duration:3e3})}))}))}}};const b=(0,p.Z)(h,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("card-component",{attrs:{title:"Change Password",icon:"lock"}},[t("form",{on:{submit:function(r){return r.preventDefault(),e.submit(r)}}},[t("b-field",{attrs:{horizontal:"",label:"Current password",message:e.formPasswordCurrentMessage,type:e.formPasswordCurrentType}},[t("b-input",{attrs:{name:"password_current",type:"password",required:"",autcomplete:"current-password"},model:{value:e.form.password_current,callback:function(r){e.$set(e.form,"password_current",r)},expression:"form.password_current"}})],1),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{horizontal:"",label:"New password",message:e.formPasswordMessage,type:e.formPasswordType}},[t("b-input",{attrs:{name:"password",type:"password",required:"",autocomplete:"new-password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("b-field",{attrs:{horizontal:"",label:"New password (confirm)",message:"Required. New password one more time"}},[t("b-input",{attrs:{name:"password_confirmation",type:"password",required:"",autocomplete:"new-password"},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}})],1),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{horizontal:""}},[t("div",{staticClass:"control"},[t("button",{staticClass:"button is-primary",class:{"is-loading":e.isLoading},attrs:{type:"submit"}},[e._v("\n          Submit\n        ")])])])],1)])}),[],!1,null,null,null).exports;var w=t(8855);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const y={name:"Profile",components:{UserAvatar:t(8408).Z,Tiles:w.Z,PasswordUpdateForm:b,ProfileUpdateForm:m,HeroBar:a.Z,TitleBar:n.Z,CardComponent:o.Z},computed:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({titleStack:function(){return["Admin","Profile"]}},(0,s.rn)(["userName","userEmail"]))};const _=(0,p.Z)(y,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("title-bar",{attrs:{"title-stack":e.titleStack}}),e._v(" "),t("hero-bar",[e._v("\n    Profile\n    "),t("router-link",{staticClass:"button",attrs:{slot:"right",to:"/"},slot:"right"},[e._v("\n      Dashboard\n    ")])],1),e._v(" "),t("section",{staticClass:"section is-main-section"},[t("tiles",[t("profile-update-form",{staticClass:"tile is-child"}),e._v(" "),t("card-component",{staticClass:"tile is-child",attrs:{title:"Profile",icon:"account"}},[t("user-avatar",{staticClass:"image has-max-width is-aligned-center"}),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{label:"Name"}},[t("b-input",{attrs:{value:e.userName,"custom-class":"is-static",readonly:""}})],1),e._v(" "),t("hr"),e._v(" "),t("b-field",{attrs:{label:"E-mail"}},[t("b-input",{attrs:{value:e.userEmail,"custom-class":"is-static",readonly:""}})],1)],1)],1),e._v(" "),t("password-update-form")],1)],1)}),[],!1,null,null,null).exports}}]);